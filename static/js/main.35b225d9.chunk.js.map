{"version":3,"sources":["components/WholeBook/WholeBook.module.css","App.module.css","api/api.ts","redux/actions.ts","redux/bookReducer.ts","api/getBookApi.ts","common/preloader.gif","common/unknownBook.png","components/Books/Book.tsx","components/Books/Books.tsx","components/Hat/UserSelect/UserSelect.tsx","components/Hat/InputButtonSendData/InputButtonSendData.tsx","components/Hat/Hat.tsx","components/WholeBook/WholeBook.tsx","components/WholeBook/BookContainer.tsx","App.tsx","reportWebVitals.ts","redux/searchReducer.ts","redux/booksReducer.ts","redux/store.ts","index.tsx"],"names":["module","exports","serverApi","axios","create","baseURL","defaults","params","CHANGE_SEARCH_QUERY","RENEW_SEARCH_RESULTS","ADD_SEARCH_RESULT","CHANGE_IS_LOADING_STATUS","SET_ERROR_MESSAGE","SET_BOOK","CHANGE_NEED_TO_SEARCH","setBook","book","type","payload","setErrorMessage","error","isLoading","changeIsLoadingStatus","OK","initialState","id","kind","booksAPI","title","pageSize","startIndex","orderBy","subject","url","get","then","response","data","totalItems","Error","catch","err","items","message","Book","React","memo","props","console","log","dispatch","useDispatch","history","useHistory","className","styles","onClick","push","imgWrapper","src","imageLinks","smallThumbnail","unknownBook","alt","categories","titleAndAuthors","bookTitle","authors","Books","booksState","useSelector","state","books","searchState","searchResults","onClickHandler","useCallback","setTimeout","queryString","length","sort","filter","useEffect","needToSearch","totalCount","booksWrapper","Fragment","pagesCount","booksContainer","map","index","volumeInfo","LoadingOrLoadMore","wasRendered","ErrorMessage","errorMessage","errorText","preloader","loadMore","UserSelect","userSelectWrapper","userSelectTitle","userSelect","value","currentValue","onChange","e","currentTarget","options","option","InputButtonSendData","onKeyPress","code","sendData","Hat","hat","darker","searchWrapper","SearchLogic","useMemo","sorts","useState","searchName","setSearchName","filterName","setFilterName","sortName","setSortName","handleRoute","onSearchFieldChange","setSearchParams","bookName","trim","selectsWrapper","WholeBook","imageSrc","large","medium","small","thumbnail","wholeBook","image","info","restInfo","description","BookSecret","bookState","document","match","bookId","BookContainer","withRouter","App","app","path","exact","render","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialData","rootReducer","combineReducers","action","store","createStore","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.35b225d9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wholeBook\":\"WholeBook_wholeBook__3kBNI\",\"image\":\"WholeBook_image__2__NG\",\"info\":\"WholeBook_info__1OQul\",\"restInfo\":\"WholeBook_restInfo__72tyj\",\"categories\":\"WholeBook_categories__2cEHC\",\"title\":\"WholeBook_title__1tFPD\",\"authors\":\"WholeBook_authors__1fz9I\",\"description\":\"WholeBook_description__3Faad\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1YSN_\",\"hat\":\"App_hat__216gS\",\"darker\":\"App_darker__24_Y4\",\"searchWrapper\":\"App_searchWrapper__2Kw16\",\"booksWrapper\":\"App_booksWrapper__1ezzE\",\"booksContainer\":\"App_booksContainer__LZ7oM\",\"book\":\"App_book__1LxLc\",\"imgWrapper\":\"App_imgWrapper__1YASa\",\"selectsWrapper\":\"App_selectsWrapper__23TAV\",\"pagesCount\":\"App_pagesCount__vK0lD\",\"bookTitle\":\"App_bookTitle__26CfJ\",\"errorMessage\":\"App_errorMessage__pKQfU\",\"errorText\":\"App_errorText__2j0KI\",\"preloader\":\"App_preloader__iVtky\",\"categories\":\"App_categories__3mZs1\",\"loadMore\":\"App_loadMore__2Szt3\"};","import axios from \"axios\";\r\nexport const serverApi = axios.create({\r\n    baseURL: 'https://www.googleapis.com/books/v1/volumes',\r\n})\r\nserverApi.defaults.params = {}\r\nserverApi.defaults.params['key'] = 'AIzaSyCI0tPq7SoEIfpnkJRjqbu_YIDUeMVvZHU'\r\n\r\n\r\n\r\nconst configOMB = {\r\n    baseURL: 'https://www.googleapis.com/books/v1/volumes',\r\n};\r\nconst key = 'AIzaSyCI0tPq7SoEIfpnkJRjqbu_YIDUeMVvZHU';\r\n\r\n\r\nconst API = {\r\n    searchBooksByTitle: (title: string) => {\r\n        return fetch(`${configOMB.baseURL}/?key=${key}&q=${title}`)\r\n            .then(data => data.json())\r\n    },\r\n};\r\n\r\nexport default API;\r\n\r\n","import {bookType} from \"./searchReducer\";\r\nimport {bookPageType} from \"./bookReducer\";\r\n\r\n//constants\r\nexport const CHANGE_SEARCH_QUERY = 'CHANGE_SEARCH_QUERY'\r\nexport const RENEW_SEARCH_RESULTS = 'RENEW_SEARCH_RESULTS'\r\nexport const ADD_SEARCH_RESULT = 'ADD_SEARCH_RESULT'\r\nexport const CHANGE_IS_LOADING_STATUS = 'CHANGE_IS_LOADING_STATUS'\r\nexport const SET_ERROR_MESSAGE = 'SET_ERROR_MESSAGE'\r\nexport const SET_BOOK = 'SET_BOOK'\r\nexport const CHANGE_NEED_TO_SEARCH = 'CHANGE_NEED_TO_SEARCH'\r\n\r\n//types\r\nexport type changeSearchQueryActionType = ReturnType<typeof changeSearchQuery>\r\nexport type renewSearchResultsActionType = ReturnType<typeof renewSearchResults>\r\nexport type addSearchResultsActionType = ReturnType<typeof addSearchResults>\r\nexport type changeIsLoadingStatusActionType = ReturnType<typeof changeIsLoadingStatus>\r\nexport type setErrorMessageActionType = ReturnType<typeof setErrorMessage>\r\nexport type setBookActionType = ReturnType<typeof setBook>\r\nexport type changeNeedToSearchActionType = ReturnType<typeof changeNeedToSearch>\r\n\r\n//action and thunk creators\r\nexport const changeNeedToSearch = (needToSearch: boolean) => {\r\n    return {\r\n        type: CHANGE_NEED_TO_SEARCH,\r\n        payload: {\r\n            needToSearch,\r\n        }\r\n    } as const\r\n}\r\nexport const setBook = (book: bookPageType) => {\r\n    return {\r\n        type: SET_BOOK,\r\n        payload: {\r\n            ...book,\r\n        }\r\n    } as const\r\n}\r\nexport const setErrorMessage = (error: string) => {\r\n    return {\r\n        type: SET_ERROR_MESSAGE,\r\n        payload: {\r\n            error,\r\n            isLoading: false,\r\n        }\r\n    } as const\r\n}\r\nexport const addSearchResults = (books: bookType[]) => {\r\n    return {\r\n        type: ADD_SEARCH_RESULT,\r\n        payload: {\r\n            books,\r\n        },\r\n    } as const\r\n}\r\nexport const renewSearchResults = (books: bookType[], totalCount: number) => {\r\n    return {\r\n        type: RENEW_SEARCH_RESULTS,\r\n        payload: {\r\n            books,\r\n            totalCount,\r\n        },\r\n    } as const\r\n}\r\nexport const changeSearchQuery = (queryString: string, filter: string, sort: string) => {\r\n    return {\r\n        type: CHANGE_SEARCH_QUERY,\r\n        payload: {\r\n            queryString,\r\n            filter,\r\n            sort,\r\n            needToSearch: true,\r\n        }\r\n    } as const\r\n}\r\nexport const changeIsLoadingStatus = (isLoading: boolean) => {\r\n    return {\r\n        type: CHANGE_IS_LOADING_STATUS,\r\n        payload: {\r\n            isLoading,\r\n        }\r\n    } as const\r\n}","import {actionsType} from \"./store\";\r\nimport {SET_BOOK} from \"./actions\";\r\n\r\n//constants\r\nexport const ERROR = '-1'\r\nexport const OK = '-99'\r\n\r\n//types\r\ntype fullBookType = {\r\n    \"kind\": string,\r\n    \"id\": string,\r\n    \"etag\": string,\r\n    \"selfLink\": string,\r\n    \"volumeInfo\": {\r\n        \"title\": string,\r\n        \"subtitle\": string,\r\n        \"authors\": string[],\r\n        \"publisher\": string,\r\n        \"publishedDate\": string,\r\n        \"description\": string,\r\n        \"industryIdentifiers\":\r\n            {\r\n                \"type\": string,\r\n                \"identifier\": string\r\n            }[]\r\n        \"readingModes\": {\r\n            \"text\": boolean,\r\n            \"image\": boolean\r\n        },\r\n        \"pageCount\": number,\r\n        \"printedPageCount\": number,\r\n        \"dimensions\": {\r\n            \"height\": string,\r\n        },\r\n        \"printType\": string,\r\n        \"categories\": string[],\r\n        \"averageRating\": number,\r\n        \"ratingsCount\": number,\r\n        \"maturityRating\": string,\r\n        \"allowAnonLogging\": boolean,\r\n        \"contentVersion\": string,\r\n        \"panelizationSummary\": {\r\n            \"containsEpubBubbles\": boolean,\r\n            \"containsImageBubbles\": boolean\r\n        },\r\n        \"imageLinks\": {\r\n            \"smallThumbnail\": string,\r\n            \"thumbnail\": string,\r\n            \"small\": string,\r\n            \"medium\": string,\r\n            \"large\": string,\r\n        },\r\n        \"language\": string,\r\n        \"previewLink\": string,\r\n        \"infoLink\": string,\r\n        \"canonicalVolumeLink\": string\r\n    },\r\n    \"layerInfo\": {\r\n        \"layers\":\r\n            {\r\n                \"layerId\": string,\r\n                \"volumeAnnotationsVersion\": string\r\n            }[]\r\n    },\r\n    \"saleInfo\": {\r\n        \"country\": string,\r\n        \"saleability\": string,\r\n        \"isEbook\": boolean,\r\n        \"listPrice\": {\r\n            \"amount\": number,\r\n            \"currencyCode\": string\r\n        },\r\n        \"retailPrice\": {\r\n            \"amount\": number,\r\n            \"currencyCode\": string\r\n        },\r\n        \"buyLink\": string,\r\n        \"offers\": [\r\n            {\r\n                \"finskyOfferType\": number,\r\n                \"listPrice\": {\r\n                    \"amountInMicros\": number,\r\n                    \"currencyCode\": string\r\n                },\r\n                \"retailPrice\": {\r\n                    \"amountInMicros\": number,\r\n                    \"currencyCode\": string\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    \"accessInfo\": {\r\n        \"country\": string,\r\n        \"viewability\": string,\r\n        \"embeddable\": boolean,\r\n        \"publicDomain\": boolean,\r\n        \"textToSpeechPermission\": string,\r\n        \"epub\": {\r\n            \"isAvailable\": boolean,\r\n            \"acsTokenLink\": string,\r\n        },\r\n        \"pdf\": {\r\n            \"isAvailable\": boolean\r\n        },\r\n        \"webReaderLink\": string,\r\n        \"accessViewStatus\": string,\r\n        \"quoteSharingAllowed\": boolean\r\n    }\r\n}\r\nexport type bookPageType = { id: string, kind: string} | fullBookType\r\nconst initialState: bookPageType = {\r\n    id: OK,\r\n    kind: '',\r\n}\r\n\r\nexport const bookReducer = (state: bookPageType = initialState, action: actionsType) => {\r\n    switch(action.type) {\r\n        case SET_BOOK:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n\r\n}","import {serverApi} from \"./api\";\r\nimport {bookSearchType} from \"../redux/searchReducer\";\r\nimport {bookPageType, ERROR} from \"../redux/bookReducer\";\r\n\r\nexport const booksAPI = {\r\n    getBooks(title: string, pageSize: number, startIndex: number, orderBy: string, subject: string) {\r\n        const url = `?q=${title}` +\r\n            (subject === `all` ? `` : `+subject:${subject}`) +\r\n            `&maxResults=${pageSize}` +\r\n            `&startIndex=${startIndex}&orderBy=${orderBy}`\r\n        return serverApi\r\n            .get<bookSearchType>(url)\r\n            .then(response => {\r\n                if(response.data.totalItems === 0) throw Error('There is no book with this title')\r\n                else return response.data\r\n            })\r\n            .catch(err => {\r\n                return {\r\n                    totalItems: -1,\r\n                    items: [],\r\n                    kind: err.message,\r\n                }\r\n            })\r\n    },\r\n    getBook(id: string) {\r\n        const url = `/${id}?`\r\n        return serverApi\r\n            .get<bookPageType>(url)\r\n            .then(response => response.data)\r\n            .catch(err => {\r\n                return {\r\n                    id: ERROR,\r\n                    kind: err.message\r\n                }\r\n            })\r\n\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/preloader.7f686c03.gif\";","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport styles from \"../../App.module.css\";\r\nimport unknownBook from \"../../common/unknownBook.png\";\r\nimport {setBook} from \"../../redux/actions\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {OK} from \"../../redux/bookReducer\";\r\n\r\ntype BookPropsType = {\r\n    id: string,\r\n    title: string,\r\n    imageLinks?: {\r\n        smallThumbnail: string,\r\n        thumbnail: string,\r\n    },\r\n    authors: string[],\r\n    categories?: string[],\r\n    [x: string]: any,\r\n}\r\nexport const Book: React.FC<BookPropsType> = React.memo((props) => {\r\n    console.log('from book')\r\n    const dispatch = useDispatch()\r\n    const history = useHistory();\r\n    const handleRoute = () =>{\r\n        dispatch(setBook({id: OK, kind: ''}))\r\n        history.push(`/book/${props.id}`);\r\n    }\r\n\r\n    return (\r\n        <div className={styles.book} onClick={handleRoute}>\r\n            <div className={styles.imgWrapper}>\r\n                <div>\r\n                    <img src={props.imageLinks ? props.imageLinks.smallThumbnail : unknownBook}\r\n                         alt={'bookPic'}/>\r\n                </div>\r\n            </div>\r\n            <span className={styles.categories}>{props.categories ? props.categories[0] : ''}</span>\r\n            <div className={styles.titleAndAuthors}>\r\n                <h3 className={styles.bookTitle}>{props.title ? props.title : ''}</h3>\r\n                <div>\r\n                    <span className={styles.authors}>{props.authors ? props.authors : ''}</span>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    )\r\n})","import React, {useCallback, useEffect} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {stateType} from \"../../redux/store\";\r\nimport {booksPageType} from \"../../redux/searchReducer\";\r\nimport {booksAPI} from \"../../api/getBookApi\";\r\nimport styles from \"../../App.module.css\";\r\nimport preloader from \"../../common/preloader.gif\";\r\nimport {Book} from \"./Book\";\r\nimport {addSearchResults, changeIsLoadingStatus, renewSearchResults, setErrorMessage} from \"../../redux/actions\";\r\nimport {booksType} from \"../../redux/booksReducer\";\r\n\r\nexport const Books = React.memo(() => {\r\n    console.log('from Books')\r\n    //data\r\n    const booksState = useSelector<stateType, booksType>(state => state.books)\r\n    const searchState = useSelector<stateType, booksPageType>(state => state.searchResults)\r\n    const dispatch = useDispatch()\r\n    const onClickHandler = useCallback(() => {\r\n        dispatch(changeIsLoadingStatus(true))\r\n        setTimeout(() => {\r\n            booksAPI.getBooks(searchState.queryString,\r\n                searchState.pageSize,\r\n                booksState.books.length,\r\n                searchState.sort,\r\n                searchState.filter)\r\n                .then(data => {\r\n                    if (data.totalItems === -1) {\r\n                        dispatch(setErrorMessage(data.kind))\r\n                    } else {\r\n                        dispatch(addSearchResults(data.items))\r\n                    }\r\n                })\r\n        }, 2000)\r\n    }, [dispatch, searchState, booksState.books.length])\r\n    //useEffect\r\n    useEffect(() => {\r\n        if (searchState.needToSearch && searchState.queryString) {\r\n            dispatch(changeIsLoadingStatus(true))\r\n            setTimeout(() => {\r\n                booksAPI.getBooks(searchState.queryString,\r\n                    searchState.pageSize,\r\n                    0,\r\n                    searchState.sort,\r\n                    searchState.filter)\r\n                    .then(data => {\r\n                        if (data.totalItems === -1) {\r\n                            dispatch(setErrorMessage(data.kind))\r\n                        } else {\r\n                            dispatch(renewSearchResults(data.items, data.totalItems))\r\n                        }\r\n                    })\r\n            }, 2000)\r\n        }\r\n    }, [searchState, dispatch])\r\n    return (\r\n        <div className={styles.booksWrapper}>\r\n            {\r\n                booksState.totalCount > 0 &&\r\n                <React.Fragment>\r\n                        <h2 className={styles.pagesCount}>Found {booksState.totalCount} results</h2>\r\n                        <div className={styles.booksContainer}>\r\n                            {\r\n                                booksState.books.map((book, index) => {\r\n                                    return (\r\n                                        <Book key={index}\r\n                                              id={book.id}\r\n                                              {...book.volumeInfo}/>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                </React.Fragment>\r\n            }\r\n            {\r\n                <LoadingOrLoadMore isLoading={booksState.isLoading}\r\n                                   totalCount={booksState.totalCount}\r\n                                   wasRendered={booksState.books.length}\r\n                                   onClickHandler={onClickHandler}\r\n                />\r\n            }\r\n            {\r\n                booksState.error &&\r\n                <ErrorMessage message={booksState.error}/>\r\n            }\r\n        </div>\r\n    )\r\n})\r\n\r\ntype ErrorMessagePropsType = {\r\n    message: string,\r\n}\r\nexport const ErrorMessage: React.FC<ErrorMessagePropsType> = React.memo((props) => {\r\n    console.log('from error')\r\n    return (\r\n        <div className={styles.errorMessage}>\r\n            <span className={styles.errorText}>\r\n                {\r\n                    props.message\r\n                }. Try again.\r\n            </span>\r\n        </div>\r\n    )\r\n})\r\n\r\ntype LoadingOrLoadMorePropsType = {\r\n    isLoading: boolean,\r\n    totalCount: number,\r\n    wasRendered: number,\r\n    onClickHandler: () => void,\r\n}\r\nexport const LoadingOrLoadMore: React.FC<LoadingOrLoadMorePropsType> = React.memo((props) => {\r\n    console.log('from LoadOrLoad')\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                props.isLoading ?\r\n                    <div className={styles.preloader}>\r\n                        <img src={preloader} alt={'preloader'}/>\r\n                    </div> :\r\n                    props.totalCount > 0 &&\r\n                    props.totalCount > props.wasRendered &&\r\n                    <h3 className={styles.loadMore}\r\n                        onClick={props.onClickHandler}>Load more</h3>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n})","import React from \"react\";\r\nimport styles from \"../../../App.module.css\";\r\n\r\ntype UserSelectPropsType = {\r\n    title: string,\r\n    options: string[],\r\n    currentValue: string,\r\n    onChange: (value: string) => void,\r\n}\r\nexport const UserSelect: React.FC<UserSelectPropsType> = React.memo((props) => {\r\n    console.log('from userSelect')\r\n    return (\r\n        <div className={styles.userSelectWrapper}>\r\n            <div className={styles.userSelectTitle}>{props.title}</div>\r\n            <div className={styles.userSelect}>\r\n                <select value={props.currentValue}\r\n                        onChange={(e) => props.onChange(e.currentTarget.value)}>\r\n                    {\r\n                        props.options.map((option, index) => {\r\n                            return (\r\n                                <option key={index} value={option}>\r\n                                    {option}\r\n                                </option>\r\n                            )\r\n                        })\r\n                    }\r\n                </select>\r\n            </div>\r\n        </div>\r\n    )\r\n})","import React, {ChangeEvent, KeyboardEvent} from \"react\";\r\n\r\ntype InputButtonSendDataPropsType = {\r\n    value: string,\r\n    onChange: (e: ChangeEvent<HTMLInputElement>) => void,\r\n    sendData: () => void,\r\n    url: string,\r\n}\r\nexport const InputButtonSendData: React.FC<InputButtonSendDataPropsType> = React.memo((props) => {\r\n    console.log('from userInput')\r\n\r\n    const onEnterPress = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.code === 'Enter') {\r\n            props.sendData()\r\n        }\r\n    }\r\n    const onButtonClick = () => {\r\n        props.sendData()\r\n    }\r\n    return (\r\n        <>\r\n            <input value={props.value} onChange={props.onChange} onKeyPress={onEnterPress}/>\r\n            <button onClick={onButtonClick}>search</button>\r\n        </>\r\n    )\r\n})","import React, {ChangeEvent, useCallback, useMemo, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {booksPageType} from \"../../redux/searchReducer\";\r\nimport styles from \"../../App.module.css\";\r\nimport {stateType} from \"../../redux/store\";\r\nimport {UserSelect} from \"./UserSelect/UserSelect\";\r\nimport {InputButtonSendData} from \"./InputButtonSendData/InputButtonSendData\";\r\nimport {changeSearchQuery} from \"../../redux/actions\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport const Hat = React.memo(() => {\r\n    console.log('from hat')\r\n    return (\r\n        <div className={styles.hat}>\r\n            <div className={styles.darker}>\r\n                <h1>Search for books</h1>\r\n                <div className={styles.searchWrapper}>\r\n                    <SearchLogic/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport const SearchLogic: React.FC = React.memo(() => {\r\n    console.log('from searchLogic')\r\n\r\n    //initial data\r\n    const categories: string[] = useMemo(() => {\r\n        return ['all', 'art', 'biography', 'computers', 'history', 'medical', 'poetry']\r\n    }, [])\r\n    const sorts: string[] = useMemo(() => {\r\n        return ['relevance', 'newest']\r\n    }, [])\r\n    const state = useSelector<stateType, booksPageType>(state => state.searchResults)\r\n    const dispatch = useDispatch()\r\n    //variable data\r\n    const [searchName, setSearchName] = useState('')\r\n    const [filterName, setFilterName] = useState(state.filter)\r\n    const [sortName, setSortName] = useState(state.sort)\r\n    const history = useHistory();\r\n    const handleRoute = () => {\r\n        history.push('/');\r\n    }\r\n    //callbacks\r\n    const onSearchFieldChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n        setSearchName(e.currentTarget.value)\r\n    }, [])\r\n    const setSearchParams = useCallback(() => {\r\n        const bookName = searchName.trim()\r\n        if (bookName) {\r\n            dispatch(changeSearchQuery(bookName, filterName, sortName))\r\n            handleRoute()\r\n        }\r\n    }, [handleRoute, dispatch, searchName, filterName, sortName, state])\r\n    return (\r\n        <React.Fragment>\r\n            <InputButtonSendData value={searchName}\r\n                                 url={'/'}\r\n                                 onChange={onSearchFieldChange}\r\n                                 sendData={setSearchParams}/>\r\n            <div className={styles.selectsWrapper}>\r\n                <UserSelect title={'categories'}\r\n                            options={categories}\r\n                            currentValue={filterName}\r\n                            onChange={setFilterName}/>\r\n                <UserSelect title={'sorted by'}\r\n                            options={sorts}\r\n                            currentValue={sortName}\r\n                            onChange={setSortName}/>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n})","import React from \"react\";\r\nimport styles from './WholeBook.module.css'\r\nimport unknownBook from '../../common/unknownBook.png'\r\n\r\ntype WholeBookPropsType = {\r\n    [x: string]: any,\r\n}\r\nexport const WholeBook: React.FC<WholeBookPropsType> = React.memo((props) => {\r\n    const imageLinks = props.imageLinks\r\n    const imageSrc = imageLinks ?\r\n        (\r\n            imageLinks.large && imageLinks.large ||\r\n            imageLinks.medium && imageLinks.medium ||\r\n            imageLinks.small && imageLinks.small ||\r\n            imageLinks.thumbnail && imageLinks.thumbnail ||\r\n            imageLinks.smallThumbnail && imageLinks.smallThumbnail\r\n        ) :\r\n        unknownBook\r\n\r\n    return (\r\n        <div className={styles.wholeBook}>\r\n            <div className={styles.image}>\r\n                <img alt={'no pic'}\r\n                     src={imageSrc}\r\n                />\r\n            </div>\r\n            <div className={styles.info}>\r\n                <div className={styles.restInfo}>\r\n                    <div className={styles.categories}>\r\n                        {\r\n                            props.categories\r\n                        }\r\n                    </div>\r\n                    <div className={styles.authors}>\r\n                        {\r\n                            props.authors\r\n                        }\r\n                    </div>\r\n                    <div className={styles.title}>\r\n                        {\r\n                            props.title\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className={styles.description}>\r\n                    {\r\n                        props.description\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})","import {RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport React, {useEffect} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {stateType} from \"../../redux/store\";\r\nimport {bookPageType, ERROR, OK} from \"../../redux/bookReducer\";\r\nimport {booksAPI} from \"../../api/getBookApi\";\r\nimport {changeNeedToSearch, setBook} from \"../../redux/actions\";\r\nimport {ErrorMessage} from \"../Books/Books\";\r\nimport preloader from \"../../common/preloader.gif\";\r\nimport {WholeBook} from \"./WholeBook\";\r\nimport styles from \"../../App.module.css\";\r\n\r\ntype PathParamsType = {\r\n    bookId: string,\r\n}\r\nconst BookSecret: React.FC<RouteComponentProps<PathParamsType>> = React.memo((props) => {\r\n    console.log('from BookWhole')\r\n    //initial data\r\n    const bookState = useSelector<stateType, bookPageType>(state => state.book)\r\n    const dispatch = useDispatch()\r\n    //side-effects\r\n    useEffect(() => {\r\n        document.title = props.match.params.bookId\r\n        setTimeout(() => {\r\n            booksAPI.getBook(props.match.params.bookId)\r\n                .then(data => {\r\n                    dispatch(setBook(data))\r\n                })\r\n        }, 2000)\r\n\r\n        return () => {\r\n            dispatch(changeNeedToSearch(false))\r\n        }\r\n\r\n    }, [dispatch, props.match.params.bookId])\r\n\r\n\r\n    return (\r\n        <div className={styles.booksWrapper}>\r\n            {\r\n                bookState.id === ERROR ?\r\n                    <ErrorMessage message={bookState.kind}/> :\r\n                    bookState.id === OK || props.match.params.bookId !== bookState.id ?\r\n                        <div className={styles.preloader}>\r\n                            <img src={preloader} alt={'preloader'}/>\r\n                        </div> :\r\n                        //@ts-ignore ____________we are here only if bookState is full\r\n                        <WholeBook {...bookState.volumeInfo}/>\r\n            }\r\n        </div>\r\n    )\r\n})\r\nexport const BookContainer = withRouter(BookSecret)","import React, {useEffect} from 'react';\nimport {HashRouter, Route, Switch} from 'react-router-dom';\nimport styles from './App.module.css';\nimport {Books} from \"./components/Books/Books\";\nimport {Hat} from \"./components/Hat/Hat\";\nimport {BookContainer} from \"./components/WholeBook/BookContainer\";\n\nfunction App() {\n    console.log('from app')\n\n    useEffect(() => {\n        document.title = 'Google Books Api'\n    }, [])\n\n    return (\n    <HashRouter>\n        <div className={styles.app}>\n            <Hat/>\n            <Switch>\n                <Route path={'/'} exact render={() => <Books/>}/>\n                <Route path={'/book/:bookId'} render={() => <BookContainer/>}/>\n            </Switch>\n        </div>\n    </HashRouter>\n    );\n}\n\nexport default App;\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {actionsType} from \"./store\";\r\nimport {CHANGE_NEED_TO_SEARCH, CHANGE_SEARCH_QUERY} from \"./actions\";\r\n\r\n//types\r\nexport type bookType = {\r\n    kind: string,\r\n    id: string,\r\n    etag: string,\r\n    selfLink: string,\r\n    volumeInfo: {\r\n        title: string,\r\n        subtitle: string,\r\n        authors: string[],\r\n        publishedDate: string,\r\n        description: string,\r\n        industryIdentifiers: [\r\n            {\r\n                type: string,\r\n                identifier: string\r\n            }\r\n        ],\r\n        readingModes: {\r\n            text: boolean,\r\n            image: boolean\r\n        },\r\n        pageCount: number,\r\n        printType: string,\r\n        categories?: string[],\r\n        maturityRating: string,\r\n        allowAnonLogging: boolean,\r\n        contentVersion: string,\r\n        panelizationSummary: {\r\n            containsEpubBubbles: boolean,\r\n            containsImageBubbles: boolean\r\n        },\r\n        imageLinks?: {\r\n            smallThumbnail: string,\r\n            thumbnail: string,\r\n        },\r\n        language: string,\r\n        previewLink: string,\r\n        infoLink: string,\r\n        canonicalVolumeLink: string,\r\n    },\r\n    saleInfo: {\r\n        country: string,\r\n        saleability: string,\r\n        isEbook: false\r\n    },\r\n    accessInfo: {\r\n        country: string,\r\n        viewability: string,\r\n        embeddable: boolean,\r\n        publicDomain: boolean,\r\n        textToSpeechPermission: string,\r\n        epub: {\r\n            isAvailable: boolean\r\n        },\r\n        pdf: {\r\n            isAvailable: boolean\r\n        },\r\n        webReaderLink: string,\r\n        accessViewStatus: string,\r\n        quoteSharingAllowed: boolean,\r\n    },\r\n    searchInfo: {\r\n        textSnippet: string,\r\n    },\r\n}\r\nexport type bookSearchType = {\r\n    kind: string,\r\n    totalItems: number,\r\n    items: bookType[],\r\n}\r\nexport type booksPageType = {\r\n    pageSize: number,\r\n    queryString: string,\r\n    filter: string,\r\n    sort: string,\r\n    needToSearch: boolean,\r\n}\r\n\r\n//data\r\nconst initialData: booksPageType = {\r\n    pageSize: 4,\r\n    queryString: '',\r\n    filter: 'all',\r\n    sort: 'relevance',\r\n    needToSearch: true,\r\n}\r\n\r\nexport const searchReducer = (state: booksPageType = initialData, action: actionsType) => {\r\n    switch (action.type) {\r\n        case CHANGE_NEED_TO_SEARCH:\r\n        case CHANGE_SEARCH_QUERY:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import {bookType} from \"./searchReducer\";\r\nimport {actionsType} from \"./store\";\r\nimport {\r\n    ADD_SEARCH_RESULT,\r\n    CHANGE_IS_LOADING_STATUS,\r\n    CHANGE_SEARCH_QUERY,\r\n    RENEW_SEARCH_RESULTS,\r\n    SET_ERROR_MESSAGE\r\n} from \"./actions\";\r\n\r\n//types\r\nexport type booksType = {\r\n    books: bookType[],\r\n    isLoading: boolean,\r\n    totalCount: number,\r\n    error: string,\r\n}\r\n\r\n//data\r\nconst initialState: booksType = {\r\n    books: [],\r\n    isLoading: false,\r\n    totalCount: 0,\r\n    error: '',\r\n}\r\n\r\nexport const booksReducer = (state: booksType = initialState, action: actionsType) => {\r\n    switch(action.type) {\r\n        case CHANGE_SEARCH_QUERY:\r\n            return {\r\n                ...initialState,\r\n            }\r\n        case RENEW_SEARCH_RESULTS:\r\n            return {\r\n                ...state,\r\n                totalCount: action.payload.totalCount,\r\n                isLoading: false,\r\n                books: [...action.payload.books],\r\n                error: '',\r\n            }\r\n        case ADD_SEARCH_RESULT:\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                books: [...state.books, ...action.payload.books],\r\n                error: '',\r\n            }\r\n        case SET_ERROR_MESSAGE:\r\n        case CHANGE_IS_LOADING_STATUS:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import {combineReducers, createStore} from \"redux\";\r\nimport {searchReducer} from \"./searchReducer\";\r\nimport {booksReducer} from \"./booksReducer\";\r\nimport {\r\n    addSearchResultsActionType,\r\n    changeIsLoadingStatusActionType, changeNeedToSearchActionType,\r\n    changeSearchQueryActionType,\r\n    renewSearchResultsActionType, setBookActionType, setErrorMessageActionType\r\n} from \"./actions\";\r\nimport {bookReducer} from \"./bookReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    searchResults: searchReducer,\r\n    books: booksReducer,\r\n    book: bookReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer)\r\n\r\n//types\r\nexport type stateType = ReturnType<typeof store.getState>\r\nexport type dispatchType = typeof store.dispatch\r\nexport type actionsType = changeSearchQueryActionType\r\n    | renewSearchResultsActionType\r\n    | changeIsLoadingStatusActionType\r\n    | addSearchResultsActionType\r\n    | setErrorMessageActionType\r\n    | setBookActionType\r\n    | changeNeedToSearchActionType","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./redux/store\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}